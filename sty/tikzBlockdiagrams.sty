%
%% Commands for Blockadiagrams
%
\newcommand{\Summationsstelle}[4][]{ %
	\begin{scope}[thick, #1]
		% Runder leerer Knoten mit vordefinierter Größe
		\node[draw, circle, minimum width = #4, minimum height = #4] (#2) at (#3) {};
	\end{scope} %
}
%
\newcommand{\Verzweigung}[4][]{ %
	\begin{scope}[inner sep = 0 pt, outer sep = 0 pt, thick, #1]
		% Leerer Knoten mit vordefinierter Größe
		\node[circle, minimum width = #4, minimum height = #4] (#2) at (#3) {};
		% Gefüllter Kreis
		\draw[solid, fill] (#2) circle (0.5*#4);
	\end{scope} %
}
%
\newcommand{\UeFunk}[5][]{ %
	\begin{scope}[thick, #1]
		% Knoten mit vordefinierter Größe
		\node[minimum width = #4, minimum height = #4] (#2) at (#3) {#5};
		% Block
		\draw (#2.north east) rectangle (#2.south west);
	\end{scope} %
}
%
\newcommand{\MGlied}[5][]{ %
	\begin{scope}[thick, #1]
		% Leerer Knoten mit vordefinierter Größe
		\node[minimum width = #4, minimum height = #4] (#2) at (#3) {};
		% Beschriftung über dem Block
		\node[fill = none, above, align = left, text width = #4] at (#2.north) {#5};
		% Block
		\draw (#2.north east) rectangle (#2.south west);
		% Multiplikationspunkt
		\draw[solid, very thin, fill] (#2.center) circle (0.11*#4);
	\end{scope} %
}
%
\newcommand{\MGliedVar}[5][]{ %
	\begin{scope}[thick, #1]
		% Leerer Knoten mit vordefinierter Größe
		\node[minimum width = #4, minimum height = #4] (#2) at (#3) {};
		% Beschriftung über dem Block
		\node[fill = none, above, align = left, text width = #4] at (#2.north) {#5};
		% Block
		\draw (#2.north east) rectangle (#2.south west);
		% Multiplikationskreuz
		\draw (#2.center) %
		+(45:0.225*#4) -- +(-135:0.225*#4) %
		+(-45:0.225*#4) -- +(135:0.225*#4);
	\end{scope} %
}
%
\newcommand{\PGlied}[5][]{ %
	\begin{scope}[thick, #1]
		% Leerer Knoten mit vordefinierter Größe
		\node[minimum width = #4, minimum height = #4] (#2) at (#3) {};
		% Beschriftung über dem Block
		\node[fill = none, above, align = left, text width = #4] at (#2.north) {#5};
		% Block
		\draw (#2.north east) rectangle (#2.south west);
		% Horizontale Linie
		\draw ([yshift = -0.225*#4] #2.north east) -- ([yshift = -0.225*#4] #2.north west);
	\end{scope} %
}
%
\newcommand{\IGlied}[5][]{ %
	\begin{scope}[thick, #1]
		% Leerer Knoten mit vordefinierter Größe
		\node[minimum width = #4, minimum height = #4] (#2) at (#3) {};
		% Beschriftung über dem Block
		\node[fill = none, above, align = left, text width = #4] at (#2.north) {#5};
		% Block
		\draw (#2.north east) rectangle (#2.south west);
		% Diagonale Linie
		\draw (#2.north east) -- (#2.south west);
	\end{scope} %
}
%
\newcommand{\DGlied}[5][]{ %
	\begin{scope}[thick, #1]
		% Leerer Knoten mit vordefinierter Größe
		\node[minimum width = #4, minimum height = #4] (#2) at (#3) {};
		% Beschriftung über dem Block
		\node[fill = none, above, align = left, text width = #4] at (#2.north) {#5};
		% Block
		\draw (#2.north east) rectangle (#2.south west);
		% D-Eck
		\draw ([xshift = 0.300*#4] #2.north west) |- ([yshift = 0.225*#4] #2.south east);
	\end{scope} %
}
%
\newcommand{\TZGlied}[6][]{ %
	\begin{scope}[thick, #1]
		% Leerer Knoten mit vordefinierter Größe
		\node[minimum width = #4, minimum height = #4] (#2) at (#3) {};
		% Beschriftung über dem Block
		% \mbox stellt sicher, dass \hfill auch bei fehlenden Argumenten aktiv ist
		\node[fill = none, above, align = center, text width = #4] at (#2.north) {\mbox{#5} \hfill \mbox{#6}};
		% Block
		\draw (#2.north east) rectangle (#2.south west);
		% Totzeit-Eck
		\draw ([xshift = 0.400*#4] #2.south west) |- ([yshift = -0.225*#4] #2.north east);
	\end{scope} %
}
%
\newcommand{\PTEinsGlied}[6][]{ %
	\begin{scope}[thick, #1]
		% Leerer Knoten mit vordefinierter Größe
		\node[minimum width = #4, minimum height = #4] (#2) at (#3) {};
		% Beschriftung über dem Block
		% \mbox stellt sicher, dass \hfill auch bei fehlenden Argumenten aktiv ist
		\node[fill = none, above, align = center, text width = #4] at (#2.north) {\mbox{#5} \hfill \mbox{#6}};
		% Block
		\draw (#2.north east) rectangle (#2.south west);
		% PT1-Kurve
		\begin{scope}[shift={(#2.south west)}]
			\draw %
			(0.00, 0.00) .. controls (0.10*#4, 0.80*#4) and (0.40*#4, 0.80*#4) .. %
			([yshift = -0.18*#4] #2.north east);
		\end{scope} %
	\end{scope} %
}
%
\newcommand{\PTZweiGlied}[6][]{ %
	\begin{scope}[thick, #1]
		% Leerer Knoten mit vordefinierter Größe
		\node[minimum width = #4, minimum height = #4] (#2) at (#3) {};
		% Beschriftung über dem Block
		% \mbox stellt sicher, dass \hfill auch bei fehlenden Argumenten aktiv ist
		\node[fill = none, above, align = center, text width = #4] at (#2.north) {\mbox{#5} \hfill \mbox{#6}};
		% Block
		\draw (#2.north east) rectangle (#2.south west);
		% PT2-Kurve
		\begin{scope}[shift={(#2.south west)}]
			\draw %
			(0.00,    0.00   ) .. controls (0.07*#4, 0.00   ) and (0.10*#4, 0.10*#4) .. %
			(0.18*#4, 0.40*#4) .. controls (0.26*#4, 0.70*#4) and (0.35*#4, 0.85*#4) .. %
			(0.43*#4, 0.85*#4) .. controls (0.49*#4, 0.85*#4) and (0.58*#4, 0.75*#4) .. %
			(0.64*#4, 0.69*#4) .. controls (0.70*#4, 0.63*#4) and (0.76*#4, 0.59*#4) .. %
			(0.82*#4, 0.59*#4) .. controls (0.88*#4, 0.59*#4) and (0.97*#4, 0.60*#4) .. %
			([yshift = -0.35*#4)] #2.north east);
		\end{scope} %
	\end{scope} %
}
%
\newcommand{\NeueEA}[5]{ %
	% Füge neue Koordinaten hinzu:
	% Nordseite (oben), von links nach rechts
	\foreach \i in {1, 2, ..., #2}
	{
		\coordinate (#1--north \i) at
		($(#1.north west)!{(\i - 0.5)/(#2)}!(#1.north east)$);
	}
	% Ostseite (rechts), von oben nach unten
	\foreach \i in {1, 2, ..., #3}
	{
		\coordinate (#1--east \i) at
		($(#1.north east)!{(\i - 0.5)/(#3)}!(#1.south east)$);
	}
	% Südseite (unten), von links nach rechts
	\foreach \i in {1, 2, ..., #4}
	{
		\coordinate (#1--south \i) at
		($(#1.south west)!{(\i - 0.5)/(#4)}!(#1.south east)$);
	}
	% Westseite (links), von oben nach unten
	\foreach \i in {1, 2, ..., #5}
	{
		\coordinate (#1--west \i) at
		($(#1.north west)!{(\i - 0.5)/(#5)}!(#1.south west)$);
	}
}
%
\newcommand{\KLGlied}[7][]{ %
	\begin{scope}[thick, #1]
		% Leerer Knoten mit vordefinierter Größe
		\node[minimum width = #4, minimum height = #4] (#2) at (#3) {};
		% Block
		\draw (#2.north east) rectangle (#2.south west);
		% Platz für die Kennlinie
		\begin{scope}[shift = {(#2.center)}, x = 0.4*#4, y = 0.4*#4]
			#5
		\end{scope}
		% Beschriftung über dem Block
		% \mbox stellt sicher, dass \hfill auch bei fehlenden Argumenten aktiv ist
		\node[fill = none, above, align = center, text width = #4] at (#2.north) {\mbox{#6} \hfill \mbox{#7}};
	\end{scope} %
}
%
\newcommand{\Saettigung}[6][]{ %
	\KLGlied[#1]{#2}{#3}{#4}{%
		\draw[thin, -latex] (0, -1) -- (0, 1);
		\draw[thin, -latex] (-1, 0) -- (1, 0);
		\draw[thick] (-1, -0.8) -- (-0.4, -0.8) -- (0.4, 0.8) -- (1, 0.8);
	}{#5}{#6}
}
%











