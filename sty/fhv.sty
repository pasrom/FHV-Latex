%
\usepackage{ifdraft}
%
\usepackage{etoolbox} %
%
 \usepackage{scrhack}
% https://tex.stackexchange.com/questions/289734/special-package-combination-gives-no-room-for-new-write
\usepackage{morewrites}
\morewritessetup{allocate=10}
%
% we need this first
\usepackage{ifthen}
%
\ifthenelse{\equal{\FHVmode}{\presentations}}{}{%
%
\usepackage[titles]{tocloft}
%
\makeatletter
	\renewcommand{\@pnumwidth}{2.5em}
	\renewcommand{\@tocrmarg}{3.5em}
\makeatother
}
%
% https://tex.stackexchange.com/questions/396661/list-of-algorithms-not-spaced-like-list-of-figures-tables
%
%\makeatletter
%\patchcmd{\listof}% <cmd>
%{\float@listhead}% <search>
%{\@namedef{l@#1}{\l@figure}\float@listhead}% <replace>
%{}{}% <success><failure>
%\makeatother
%
% https://stackoverflow.com/a/3029507
%
%\makeatletter
%\let\my@chapter\@chapter
%\renewcommand*{\@chapter}{%
%%	\addtocontents{lol}{\protect\addvspace{35pt}}%
%	\addtocontents{loa}{\protect\addvspace{0pt}}%
%	\my@chapter}
%\makeatother
%
\ifthenelse{\equal{\FHVmode}{\paper} \OR \equal{\FHVmode}{\presentations}}{%
	\usepackage[linesnumbered,ruled,commentsnumbered,\newLanguage]{algorithm2e}%
}{%
	\usepackage[linesnumbered,ruled,commentsnumbered,algochapter,\newLanguage]{algorithm2e}%
}
%
%\RedeclareSectionCommand{chapter}
%
\usepackage{listings}
%
%\ifthenelse{\equal{\FHVmode}{\presentations}}{}{%
%
% https://tex.stackexchange.com/a/381303
%
\makeatletter
\renewcommand*\l@algocf{\l@figure}
%\renewcommand*\l@algocf{\@dottedtocline{1}{1em}{3em}}
\renewcommand*\l@lstlisting{\l@figure}
\makeatother
%
\makeatletter
\addtocontents{loa}{\protect\addvspace{30pt}}%
\renewcommand\listofalgorithms{%
	\chapter*{\listalgorithmcfname}%
%		\protect\vspace{10pt}%
		\setlength{\parskip}{0pt}%
		\@starttoc{loa}%
}
\makeatother
%
% https://tex.stackexchange.com/a/88563
%
%\makeatletter
%\patchcmd{\@chapter}% <cmd>
%{\chaptermark{#1}}% <search>
%{\chaptermark{#1}%	
%	\addtocontents{loa}{\protect\addvspace{10\p@}}}% replace
%{}{}% <success><failure>
%\makeatother
%
%}
%
\ifthenelse{\equal{\FHVmode}{\presentations}}%
{
\usepackage{pgfpages}
\usepackage{makeidx}
\makeindex
\newenvironment{theindex}
{\let\item\par
	%definitions for subitem etc
}{}
\newcommand\indexspace{}
}%
{\usepackage{./sty/layout}}
%
%necessary if german language is selected
\usepackage[english, ngerman]{babel} %german hyphenation and headings
%
\ifthenelse{\equal{\FHVmode}{\presentations}}%
{}%
{\pagestyle{headings}}%
%
\RequirePackage{currfile}
%
% load after algorithm2e ref: https://www.mrunix.de/forums/showthread.php?71717-Algorithm2e-Zeilennummern-Bug
\usepackage[T1]{fontenc}
%
\usepackage{amsmath} % need for subequations
\usepackage{graphicx} % need for figures
\usepackage[space]{grffile} % expand  file name processing of graphics/x
\usepackage{calc}
%
\usepackage{subfiles}
\usepackage[utf8]{inputenc} % utf8 encoding (us this, if you have to switch between platforms)
\usepackage{array}
\usepackage{longtable}
%allow rotating
\usepackage{rotating}
%eps to pdf
\usepackage{epstopdf}
%floating figures
\usepackage{float}
\restylefloat{figure}
%minimal working example
\usepackage{mwe}
%loads also amsmath
\usepackage{mathtools}
%labels anzeigen
%\usepackage{showlabels}
% for the appendix patch needed
\usepackage{appendix}
%eps to pdf automatic
\usepackage{epstopdf}
%
\usepackage{spreadtab}
%coloring and so on
%
\ifthenelse{\equal{\FHVmode}{\presentations}}%
{}%
{\usepackage[table,xcdraw,dvipsnames]{xcolor}}%
%set the quotes
\usepackage[autostyle=true,german=quotes]{csquotes}
%
% todonotes
\usepackage[\notesFHV]{todonotes} 
%
\usepackage{pgfgantt}
\usepackage[bottom,hang]{footmisc}
\setlength{\footnotemargin}{0pt} % Do not indent foot notes!
% table footnotes
%\usepackage{tablefootnote}
\usepackage{footnote}
\usepackage{threeparttable}

\usepackage[draft=false,kerning=true,babel]{microtype}
\usepackage{lscape} % landscape verwenden
% use other pdfs in this document
\usepackage{pdfpages}
% plots
\usepackage{pgfplots} 
\pgfplotsset{compat=1.13}

% center fuer zentrierung oder justification=RaggedRight, singlelinecheck=false fuer linksbuendig
\usepackage[center]{caption}
\usepackage{subcaption}
%
%\usepackage[ngerman]{babel} %german hyphenation and headings	
%
\usepackage[
\biblatexOptions
]{biblatex}

\usepackage{adjustbox,lipsum}
\usepackage{multirow}
\usepackage{forloop}
% for lines in tables
\usepackage{hhline}
%
% set space between lines
%
\usepackage{setspace} % this package has to be loaded before hyperref!
%
% load as late as possible, otherwise the footnote will not work!
\usepackage{hyperxmp}
\usepackage[\newLanguage]{varioref}
\PassOptionsToPackage{hyphens,obeyspaces,spaces}{url}
\usepackage[breaklinks=true]{hyperref}
\usepackage{footnotebackref}
\usepackage{nameref}
{\setlength{\emergencystretch}{1em}%
\appto\UrlBreaks{\do\1\do\2\do\3\do\4\do\5\do\6\do\7\do\8\do\9}
%
%\usepackage[nottoc]{tocbibind}  % no `Contents` in TOC
%
\usepackage{blindtext}
%
\usepackage[style=long,toc,acronym,automake]{glossaries} % need for table of contents, list of acronyms and glossary
%
\usepackage{multicol}
%
\usepackage{dirtree}
%
\usepackage{fp,siunitx} 
%
\usepackage{xspace}
%
\ifthenelse{\equal{\FHVmode}{\presentations}}%
{}%
{\usepackage{enumitem}}
%
\usepackage{latexsym}
%
\usepackage{dsfont}
%
\ifthenelse{\equal{\FHVmode}{\paper}}{%
	\usepackage[\newLanguage,nameinlink,capitalize]{cleveref}
}{
	\usepackage[\newLanguage,nameinlink,capitalize,noabbrev]{cleveref}
}
%
\addbibresource{./bib/Bibliography.bib}
%
% path for different platforms
\usepackage{ifplatform}
%
% use for \toprule \bottomrule \middlerule for tables
\usepackage{booktabs}
%
\usepackage{environ}
%
% searching for substrings
%
\usepackage{xstring}
%
\usepackage{./sty/Tikz}
\ifthenelse{\equal{\FHVmode}{\presentations}}{%
%	\usepackage{./sty/Presentation}
}{%
	\usepackage{./sty/Headers}%
	\usepackage{./sty/bibSettings}%
}
\usepackage{./sty/CommandsFHV}%

\usepackage{./sty/tikzBlockdiagrams}
\usepackage{./sty/Listings}
\usepackage{./sty/gantCommands}
\usepackage{./sty/Commands}
\usepackage{./sty/Paper}
\usepackage{./sty/Environments}
\if\presentations\FHVmode%
	\usepackage{./sty/Presentation}%
\else%
%
% config as late as possible (https://golatex.de/algorithm2e-und-parindent-t13310.html)
%
	\if\FHVmode\paper%
		\usepackage{indentfirst}% https://tex.stackexchange.com/a/39228
	\else%
		\KOMAoptions{parskip=half-}%
		%\setlength{\parindent}{0pt} % better use this, to prevent missbehaving of the algorithm2e package (the LOA)
	\fi%
\fi
%
\ifthenelse{\equal{\debug}{true}}{
	\usepackage{pagegrid}
	\usepackage{showframe}
	\usepackage{layout}
% Display length in mm
	\makeatletter
		\renewcommand*{\lay@value}[2]{%
			\strip@pt\dimexpr0.351459\dimexpr\csname#2\endcsname\relax\relax mm%
		}
	\makeatother
}{}
%
\setlength{\extrarowheight}{3pt} % table space in front of line
\patchcmd{\bibsetup}{\interlinepenalty=5000}{\interlinepenalty=10000}{}{}
%
% add gifs into pdfs
%
\usepackage{animate}